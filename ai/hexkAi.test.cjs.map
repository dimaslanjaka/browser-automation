{"version":3,"sources":["../../src/ai/hexkAi.test.js"],"names":["path","spawnAsync","getOrCreateSession","sendMessage"],"mappings":";;;;;;;;;;AAYA,eAAe,QAAQ,QAAA,EAAU;AAC/B,EAAA,QAAA,GAAWA,qBAAA,CAAK,OAAO,QAAQ,CAAA;AAG/B,EAAA,MAAM,WAAA,GAAc,MAAMC,qBAAA,CAAW,KAAA,EAAO,CAAC,MAAA,EAAQ,aAAA,EAAe,UAAU,CAAC,CAAA;AAC/E,EAAA,MAAM,WAAW,WAAA,CAAY,MAAA,CAAO,MAAM,IAAI,CAAA,CAAE,SAAS,QAAQ,CAAA;AAGjE,EAAA,MAAM,QAAA,GAAW,QAAA,GAAW,CAAC,YAAA,EAAc,MAAA,EAAQ,UAAA,EAAY,QAAQ,CAAA,GAAI,CAAC,YAAA,EAAc,MAAA,EAAQ,QAAQ,CAAA;AAE1G,EAAA,MAAM,IAAA,GAAO,MAAMA,qBAAA,CAAW,KAAA,EAAO,QAAQ,CAAA;AAC7C,EAAA,OAAO,IAAA,CAAK,MAAA;AACd;AAEA,eAAe,iBAAA,GAAoB;AACjC,EAAA,MAAM,IAAA,GAAO,MAAM,OAAA,CAAQ,UAAU,CAAA;AACrC,EAAA,MAAM,OAAA,GAAU,MAAMC,4BAAA,CAAmB,yBAAyB,CAAA;AAClE,EAAA,MAAM,YAAY,MAAMC,qBAAA;AAAA,IACtB,OAAA,CAAQ,EAAA;AAAA,IACR;AAAA;;AAAA;AAAA,EAIF,IAAI;AAAA;AAAA,IAAA;AAAA,GAGJ;AACA,EAAA,OAAA,CAAQ,GAAA,CAAI,SAAA,CAAU,IAAA,CAAK,MAAM,CAAA;AACnC;AAEA,iBAAA,EAAkB,CAAE,KAAA,CAAM,OAAA,CAAQ,GAAG,CAAA","file":"hexkAi.test.cjs","sourcesContent":["import { spawnAsync } from 'cross-spawn';\nimport path from 'upath';\nimport { getOrCreateSession, sendMessage } from './heckAi.js';\n\n/**\n * Entry point to test session creation and message sending.\n */\nasync function _sample() {\n  const session = await getOrCreateSession('hello');\n  await sendMessage(session.id, 'hello', true);\n}\n\nasync function gitDiff(filePath) {\n  filePath = path.toUnix(filePath);\n\n  // Check if the file is staged\n  const stagedFiles = await spawnAsync('git', ['diff', '--name-only', '--cached']);\n  const isStaged = stagedFiles.output.split('\\n').includes(filePath);\n\n  // Pick the right diff command\n  const diffArgs = isStaged ? ['--no-pager', 'diff', '--cached', filePath] : ['--no-pager', 'diff', filePath];\n\n  const diff = await spawnAsync('git', diffArgs);\n  return diff.output;\n}\n\nasync function gitCommitCreation() {\n  const diff = await gitDiff('skrin.js');\n  const session = await getOrCreateSession('commit message creation');\n  const _response = await sendMessage(\n    session.id,\n    `\nCreate commit message for this diff:\n\n\\`\\`\\`\n${diff}\n\\`\\`\\`\n    `\n  );\n  console.log(_response.data.answer);\n}\n\ngitCommitCreation().catch(console.log);\n"]}