{"version":3,"sources":["../src/skrin_utils.js"],"names":["typeAndTrigger","getAge"],"mappings":"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","file":"skrin_utils.cjs","sourcesContent":["import { getAge } from '../src/date.js';\nimport { typeAndTrigger } from './puppeteer_utils.js';\n\n/**\n * Checks if an invalid alert is visible on the page.\n * @param {import('puppeteer').Page} page - The Puppeteer page instance.\n * @returns {Promise<boolean>} - True if the alert is visible, otherwise false.\n */\nexport async function isInvalidAlertVisible(page) {\n  return await page.evaluate(() => {\n    const elem = document.querySelector('.k-widget.k-tooltip.k-tooltip-validation.k-invalid-msg');\n    if (!elem) return false;\n\n    const style = window.getComputedStyle(elem);\n    return (\n      style &&\n      style.display !== 'none' &&\n      style.visibility !== 'hidden' &&\n      elem.offsetWidth > 0 &&\n      elem.offsetHeight > 0\n    );\n  });\n}\n\n/**\n * Checks if the ID modal (maximized window) is visible on the page.\n *\n * @param {import('puppeteer').Page} page - The Puppeteer page instance.\n * @returns {Promise<boolean>} - Resolves to `true` if the modal is visible, otherwise `false`.\n */\nexport async function isIdentityModalVisible(page) {\n  return (\n    (await page.evaluate(() => {\n      const modal = document.querySelector('.k-widget.k-window.k-window-maximized');\n      return (\n        modal && window.getComputedStyle(modal).display !== 'none' && modal.offsetWidth > 0 && modal.offsetHeight > 0\n      );\n    })) || false\n  );\n}\n\n/**\n * Attempts to click the \"Iya\" (or #pilih) button inside an iframe within a modal dialog.\n * Adds secondary validation and JS-based fallback for clicking.\n *\n * @async\n * @function\n * @param {import('puppeteer').Page|import('puppeteer').Frame} page - The Puppeteer Page instance representing the browser tab.\n * @returns {Promise<void>} Resolves when the click is attempted or logs an appropriate error.\n */\nexport async function confirmIdentityModal(page) {\n  const iframeElement = await page.$('#dialog iframe.k-content-frame');\n  if (!iframeElement) {\n    console.log('❌ Iframe inside #dialog not found!');\n    return;\n  }\n\n  const iframe = await iframeElement.contentFrame();\n  if (!iframe) {\n    console.log('❌ Failed to get content of iframe inside #dialog!');\n    return;\n  }\n\n  try {\n    await iframe.waitForSelector('body', { visible: true, timeout: 10000 });\n\n    const pilihBtn = await iframe.$('#pilih');\n    if (pilihBtn) {\n      const box = await pilihBtn.boundingBox();\n      if (box) {\n        try {\n          await Promise.all([\n            page.waitForNavigation({ waitUntil: 'domcontentloaded', timeout: 5000 }).catch(() => null),\n            pilihBtn.click({ delay: 100 })\n          ]);\n\n          // Small buffer wait to be sure\n          await new Promise((resolve) => setTimeout(resolve, 500));\n\n          const modalStillVisible = await page.$eval('#dialog', (el) => el.offsetParent !== null).catch(() => false);\n          if (!modalStillVisible) {\n            console.log('✅ #pilih clicked, modal gone.');\n            return;\n          }\n\n          console.warn('⚠️ Modal still visible. Trying JS-based dispatch as fallback...');\n          const jsDispatchWorked = await iframe.evaluate(() => {\n            const btn = document.querySelector('#pilih');\n            if (!btn) return false;\n\n            btn.dispatchEvent(\n              new MouseEvent('click', {\n                bubbles: true,\n                cancelable: true,\n                view: window\n              })\n            );\n            return true;\n          });\n\n          await new Promise((resolve) => setTimeout(resolve, 500));\n\n          const stillVisible = await page.$eval('#dialog', (el) => el.offsetParent !== null).catch(() => false);\n          if (!stillVisible && jsDispatchWorked) {\n            console.log('✅ JS-dispatch click closed modal.');\n            return;\n          }\n\n          console.log('❌ JS dispatch didn’t close modal.');\n        } catch (err) {\n          console.error('❌ Error while clicking #pilih:', err);\n          return;\n        }\n      } else {\n        console.warn('⚠️ #pilih is not visible (no bounding box).');\n      }\n    }\n\n    // Fallback: Evaluate XPath manually\n    const iyaClicked = await iframe.evaluate(() => {\n      try {\n        const xpath = \"//button[contains(translate(., 'IYA', 'iya'), 'iya')]\";\n        const result = document.evaluate(xpath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);\n        const btn = result.singleNodeValue;\n        if (btn instanceof HTMLElement) {\n          btn.dispatchEvent(\n            new MouseEvent('click', {\n              bubbles: true,\n              cancelable: true,\n              view: window\n            })\n          );\n          return true;\n        }\n        return false;\n      } catch {\n        return false;\n      }\n    });\n\n    if (iyaClicked) {\n      console.log('✅ Clicked \"Iya\" button using XPath + JS dispatch.');\n    } else {\n      console.log('❌ No #pilih or \"Iya\" button found or clickable.');\n    }\n  } catch (err) {\n    console.error('❌ Error in confirmIdentityModal:', err);\n  }\n}\n\n/**\n * Checks if a visible error notification with the class `.k-notification-error`\n * is present on the page. Specifically used to detect the NIK error message.\n *\n * @param {import('puppeteer').Page} page - The Puppeteer Page instance.\n * @returns {Promise<boolean>} - Resolves to `true` if a visible error notification is found, otherwise `false`.\n */\nexport async function isNikErrorVisible(page) {\n  return await page.evaluate(() => {\n    const elements = document.querySelectorAll('.k-notification-error');\n    for (const el of elements) {\n      const style = window.getComputedStyle(el);\n      const rect = el.getBoundingClientRect();\n      const isVisible =\n        style.display !== 'none' &&\n        style.visibility !== 'hidden' &&\n        parseFloat(style.opacity) > 0 &&\n        rect.width > 0 &&\n        rect.height > 0;\n\n      if (isVisible) return true;\n    }\n    return false;\n  });\n}\n\n/**\n * Checks if a visible success notification with the class `.k-notification-success`\n * is present on the page.\n *\n * @param {import('puppeteer').Page} page - The Puppeteer Page instance.\n * @returns {Promise<boolean>} - Resolves to `true` if a visible success notification is found, otherwise `false`.\n */\nexport async function isSuccessNotificationVisible(page) {\n  return await page.evaluate(() => {\n    const elements = document.querySelectorAll('.k-notification-success');\n    for (const el of elements) {\n      const style = window.getComputedStyle(el);\n      const rect = el.getBoundingClientRect();\n      const isVisible =\n        style.display !== 'none' &&\n        style.visibility !== 'hidden' &&\n        parseFloat(style.opacity) > 0 &&\n        rect.width > 0 &&\n        rect.height > 0;\n\n      if (isVisible) return true;\n    }\n    return false;\n  });\n}\n\n/**\n * Checks if the error modal is visible on the page.\n * @param {import('puppeteer').Page} page - The Puppeteer page instance.\n * @returns {Promise<boolean>} - Resolves to true if the error modal is visible, otherwise false.\n */\nexport async function isNIKNotFoundModalVisible(page) {\n  return await page.evaluate(() => {\n    const modal = document.querySelector('[aria-labelledby=\"dialogconfirm_wnd_title\"]');\n    if (modal && modal.innerText.includes('Data tidak ditemukan')) {\n      // Check visibility: display, visibility, opacity, and boundingClientRect\n      const style = window.getComputedStyle(modal);\n      const rect = modal.getBoundingClientRect();\n      return (\n        style.display !== 'none' &&\n        style.visibility !== 'hidden' &&\n        style.opacity !== '0' &&\n        rect.width > 0 &&\n        rect.height > 0\n      );\n    }\n    return false;\n  });\n}\n\n/**\n * Utility: Generate a random number between min and max (inclusive).\n * @param {number} min - The minimum value (inclusive).\n * @param {number} max - The maximum value (inclusive).\n * @returns {number} A random integer between min and max.\n */\nfunction getRandomInRange(min, max) {\n  return Math.round(Math.random() * (max - min) + min);\n}\n\n/**\n * Height ranges (in cm) by age and gender for Indonesian population.\n * Data structure: { gender: { age: [min, max] } }\n * @type {Object<string, Object<number, [number, number]>>}\n */\nconst tinggiRange = {\n  'laki-laki': {\n    0: [45, 55],\n    1: [65, 75],\n    2: [75, 85],\n    3: [85, 95],\n    4: [90, 100],\n    5: [100, 108],\n    10: [125, 135],\n    15: [150, 170],\n    20: [168, 190],\n    30: [170, 190],\n    40: [168, 188],\n    50: [165, 185],\n    60: [160, 180],\n    70: [155, 175],\n    80: [150, 170],\n    90: [145, 165],\n    100: [140, 160]\n  },\n  perempuan: {\n    0: [45, 54],\n    1: [64, 74],\n    2: [74, 84],\n    3: [84, 94],\n    4: [89, 99],\n    5: [98, 106],\n    10: [123, 133],\n    15: [148, 165],\n    20: [162, 180],\n    30: [165, 178],\n    40: [162, 175],\n    50: [160, 170],\n    60: [157, 168],\n    70: [154, 165],\n    80: [150, 160],\n    90: [145, 155],\n    100: [140, 150]\n  }\n};\n\n/**\n * Weight ranges (in kg) by age and gender for Indonesian population.\n * Data structure: { gender: { age: [min, max] } }\n * @type {Object<string, Object<number, [number, number]>>}\n */\nconst beratRange = {\n  'laki-laki': {\n    0: [2, 5],\n    1: [7, 10],\n    2: [9, 14],\n    3: [12, 16],\n    4: [13, 18],\n    5: [14, 18],\n    10: [25, 35],\n    15: [42, 65],\n    20: [60, 90],\n    30: [65, 95],\n    40: [70, 100],\n    50: [68, 95],\n    60: [65, 90],\n    70: [60, 85],\n    80: [55, 80],\n    90: [50, 75],\n    100: [45, 70]\n  },\n  perempuan: {\n    0: [2, 4.5],\n    1: [6, 9],\n    2: [8, 12],\n    3: [10, 15],\n    4: [12, 17],\n    5: [13, 17],\n    10: [24, 34],\n    15: [38, 55],\n    20: [55, 80],\n    30: [60, 85],\n    40: [62, 88],\n    50: [60, 85],\n    60: [58, 82],\n    70: [55, 80],\n    80: [50, 75],\n    90: [45, 70],\n    100: [40, 65]\n  }\n};\n\n/**\n * Ambil range tinggi/berat berdasarkan umur & gender.\n * @param {number} age - umur orang\n * @param {string} gender - 'laki-laki' / 'perempuan' / 'L' / 'P'\n * @param {'tinggi'|'berat'} type - jenis data yang diambil\n * @returns {{min: number, max: number, random: number, closestAge: number}|null}\n */\nfunction getRange(age, gender, type) {\n  // Validasi umur\n  if (typeof age !== 'number' || age < 0 || age > 120) return null;\n\n  // Normalisasi gender\n  gender = gender.toLowerCase();\n  if (gender === 'l') gender = 'laki-laki';\n  if (gender === 'p') gender = 'perempuan';\n\n  const dataset = type === 'tinggi' ? tinggiRange : beratRange;\n  const data = dataset[gender];\n  if (!data) return null;\n\n  // Cari umur terdekat\n  const ages = Object.keys(data).map(Number);\n  const closestAge = ages.reduce((prev, curr) => (Math.abs(curr - age) < Math.abs(prev - age) ? curr : prev));\n\n  const [min, max] = data[closestAge];\n  return { min, max, random: getRandomInRange(min, max), closestAge };\n}\n\n/**\n * Get a random height value for a person based on age and gender.\n * @param {number|string} age - The age of the person.\n * @param {string} gender - The gender ('laki-laki', 'perempuan', 'L', or 'P').\n * @returns {number|null} A random height value in cm, or null if invalid parameters.\n */\nfunction getTinggiBadan(age, gender) {\n  const result = getRange(typeof age === 'string' ? parseInt(age, 10) : age, gender, 'tinggi');\n  return result ? result.random : null;\n}\n\n/**\n * Get a random weight value for a person based on age and gender.\n * @param {number|string} age - The age of the person.\n * @param {string} gender - The gender ('laki-laki', 'perempuan', 'L', or 'P').\n * @returns {number|null} A random weight value in kg, or null if invalid parameters.\n */\nfunction getBeratBadan(age, gender) {\n  const result = getRange(typeof age === 'string' ? parseInt(age, 10) : age, gender, 'berat');\n  return result ? result.random : null;\n}\n\nexport { getBeratBadan, getTinggiBadan };\n\n/**\n * Fix the height and weight input fields if they are empty.\n * @param {import('puppeteer').Page} page - The Puppeteer page instance.\n * @param {number|string} age - The age of the person.\n * @param {string} gender - The gender of the person ('laki-laki' or 'perempuan').\n */\nexport async function fixTbAndBb(page, age, gender) {\n  const tbValue = await page.$eval('#field_item_tinggi_badan input', (input) => input.value.trim());\n  if (!tbValue) {\n    const tinggiBadan = getTinggiBadan(age, gender);\n    if (tinggiBadan) {\n      await typeAndTrigger(page, '#field_item_tinggi_badan input', tinggiBadan.toString());\n    } else {\n      throw new Error('Tinggi badan tidak valid');\n    }\n  }\n\n  const bbValue = await page.$eval('#field_item_berat_badan input', (input) => input.value.trim());\n  if (!bbValue) {\n    const beratBadan = getBeratBadan(age, gender);\n    if (beratBadan) {\n      await typeAndTrigger(page, '#field_item_berat_badan input', beratBadan.toString());\n    } else {\n      throw new Error('Berat badan tidak valid');\n    }\n  }\n}\n\n/**\n * Get patient data information from the page form elements.\n * @param {import('puppeteer').Page} page - The Puppeteer page instance.\n * @returns {Promise<{gender: string, age: number, birthDate: string, location: {province: string, city: string}, occupation: string, bodyWeight: string, bodyHeight: string}>} Patient information object.\n */\nexport async function getPersonInfo(page) {\n  const gender = await page.evaluate(() => document.querySelector('input[name=\"jenis_kelamin_id_input\"]')?.value);\n  const birthDate = await page.evaluate(() => document.querySelector('input[name=\"dt_tgl_lahir\"]')?.value);\n  const age = getAge(birthDate);\n  const province = await page.$eval('#field_item_provinsi_ktp_id input[type=\"text\"]', (input) => input.value.trim());\n  const city = await page.$eval('#field_item_kabupaten_ktp_id input[type=\"text\"]', (input) => input.value.trim());\n  const occupation = await page.evaluate(() => document.querySelector('input[name=\"pekerjaan_id_input\"]')?.value);\n  const bodyWeight = await page.evaluate(\n    () => document.querySelector('#field_item_berat_badan input[type=\"text\"]')?.value\n  );\n  const bodyHeight = await page.evaluate(\n    () => document.querySelector('#field_item_tinggi_badan input[type=\"text\"]')?.value\n  );\n  return { gender, age, birthDate, location: { province, city }, occupation, bodyWeight, bodyHeight };\n}\n"]}