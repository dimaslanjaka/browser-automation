import{j as e,d as _,I as y,e as A,A as u,P as m,T as b}from"./bootstrap-BYiMK-CF.js";import{r as n,u as T}from"./react-router-CZgj852O.js";import"./react-DJG_os-6.js";function N(s){return s.replace(/([A-Za-zÀ-ÖØ-öø-ÿ]+(?:['’][A-Za-zÀ-ÖØ-öø-ÿ]+)?)/g,r=>/^[A-ZÀ-ÖØ-Þ]+$/.test(r)?r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():r.charAt(0).toUpperCase()+r.slice(1))}const I="_logTimestamp_bbgqt_9",q="_sectionTitle_bbgqt_12",B="_accordionHeader_bbgqt_25",P="_container_bbgqt_45",w="_accordionItem_bbgqt_68",K="_accordionBody_bbgqt_74",M="_table_bbgqt_77",H="_textSuccess_bbgqt_81",d={logTimestamp:I,sectionTitle:q,accordionHeader:B,container:P,accordionItem:w,accordionBody:K,table:M,textSuccess:H};function V({log:s,idx:r}){const x=typeof s.message=="string"&&s.message.toLowerCase().includes("success");return e.jsxs(u.Item,{eventKey:String(r),className:d.accordionItem,children:[e.jsx(u.Header,{className:d.accordionHeader,children:e.jsxs("span",{style:{width:"100%"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:s.data?.nik||""})," - ",N(s.data?.nama||"")]})}),e.jsxs(u.Body,{className:d.accordionBody,children:[e.jsxs("div",{className:`${d.logTimestamp} mb-2`,children:["Timestamp: ",s.timestamp||""]}),e.jsx("div",{className:`${d.logMessage} mb-2${x?" "+d.textSuccess:""}`,children:s.message||""}),e.jsx("span",{className:d.sectionTitle,children:"Basic Data"}),e.jsx(b,{bordered:!0,striped:!0,className:`mb-3 ${d.table}`,children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Tanggal"}),e.jsx("td",{children:s.data?.tanggal||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Nama"}),e.jsx("td",{children:N(s.data?.nama||"")})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Tgl Lahir"}),e.jsx("td",{children:s.data?.tgl_lahir||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Alamat"}),e.jsx("td",{children:s.data?.alamat||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"BB"}),e.jsx("td",{children:s.data?.bb||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"TB"}),e.jsx("td",{children:s.data?.tb||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Petugas"}),e.jsx("td",{children:s.data?.petugas||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Status"}),e.jsx("td",{children:s.data?.status||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Gender"}),e.jsx("td",{children:s.data?.gender||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Age"}),e.jsx("td",{children:s.data?.age||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Pekerjaan"}),e.jsx("td",{children:s.data?.pekerjaan||""})]})]})}),s.data?.parsed_nik&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"section-title",children:"Parsed NIK"}),e.jsx(b,{bordered:!0,hover:!0,className:"mb-3 parsed-nik-table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Status"}),e.jsx("td",{children:s.data.parsed_nik.status||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Message"}),e.jsx("td",{children:s.data.parsed_nik.message||""})]}),s.data.parsed_nik.data&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"NIK"}),e.jsx("td",{children:s.data.parsed_nik.data.nik||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Kelamin"}),e.jsx("td",{children:s.data.parsed_nik.data.kelamin||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Lahir"}),e.jsx("td",{children:s.data.parsed_nik.data.lahir||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Provinsi"}),e.jsx("td",{children:s.data.parsed_nik.data.provinsi||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Kota/Kab"}),e.jsx("td",{children:s.data.parsed_nik.data.kotakab||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Kecamatan"}),e.jsx("td",{children:s.data.parsed_nik.data.namaKec||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Uniqcode"}),e.jsx("td",{children:s.data.parsed_nik.data.uniqcode||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Original Lahir"}),e.jsx("td",{children:s.data.parsed_nik.data.originalLahir||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Kelurahan"}),e.jsx("td",{children:Array.isArray(s.data.parsed_nik.data.kelurahan)?e.jsx("ul",{className:"list-group list-group-flush",children:s.data.parsed_nik.data.kelurahan.map((i,c)=>e.jsxs("li",{className:"list-group-item",children:[i.name," ",e.jsxs("span",{className:"text-muted",children:["(ID: ",i.id,", District: ",i.district_id,")"]})]},c))}):""})]})]})]})})]}),s.data?.formValues&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"section-title",children:"Form Values"}),e.jsxs(b,{bordered:!0,size:"sm",className:"mb-3",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Label"}),e.jsx("th",{children:"Value"})]})}),e.jsx("tbody",{children:s.data.formValues.map((i,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:i.label||""}),e.jsx("td",{children:i.value||"<empty>"})]},c))})]})]})]})]})}function D({pageTitle:s="Log Viewer"}){const[r,x]=n.useState([]),[i,c]=n.useState(!0),[h,k]=n.useState(""),[l,o]=n.useState(1),j=20,v=T();n.useEffect(()=>{let t=!0;return c(!0),fetch("/browser-automation/assets/data/logs.json").then(a=>a.json()).then(a=>{t&&x(a)}).catch(()=>{t&&x([])}).finally(()=>{t&&c(!1)}),()=>{t=!1}},[]);const S=n.useMemo(()=>r.filter(t=>t.data&&t.data.status==="success").length,[r]),L=n.useMemo(()=>r.filter(t=>t.data&&t.data.status!=="success").length,[r]),f=n.useMemo(()=>{if(!h.trim())return r;const t=h.trim().toLowerCase();return r.filter(a=>[a.data?.nik,a.data?.nama,a.message,a.data?.tanggal,a.data?.alamat,a.data?.petugas,a.data?.status,a.data?.gender,a.data?.age,a.data?.pekerjaan].some(g=>typeof g=="string"&&g.toLowerCase().includes(t)))},[r,h]),p=Math.ceil(f.length/j),C=f.slice((l-1)*j,l*j);return n.useEffect(()=>{o(1)},[h]),i?e.jsx("div",{className:"text-center my-5",children:"Loading logs..."}):e.jsxs("div",{className:`container mx-auto py-4 ${d.container}`,children:[e.jsxs("button",{type:"button",className:"btn btn-outline-secondary mb-3",onClick:()=>v("/"),children:[e.jsx("i",{className:"fa fa-arrow-left me-2"})," Back"]}),e.jsx("h1",{className:"my-4",children:s}),e.jsxs("div",{className:"mb-4 d-flex flex-wrap justify-content-center gap-2",children:[e.jsxs(_,{bg:"success",style:{fontSize:"0.95em",padding:"0.35em 0.8em",minWidth:120,textAlign:"center"},children:["Success: ",S]}),e.jsxs(_,{bg:"danger",style:{fontSize:"0.95em",padding:"0.35em 0.8em",minWidth:120,textAlign:"center"},children:["Not Success: ",L]})]}),e.jsxs(y,{className:"mb-3",id:"log-search-group",children:[e.jsx(y.Text,{children:e.jsx("i",{className:"fa-solid fa-magnifying-glass"})}),e.jsx(A,{type:"text",placeholder:"Search logs...",autoComplete:"off",value:h,onChange:t=>k(t.target.value)})]}),e.jsx(u,{alwaysOpen:!0,style:{maxHeight:"70vh",overflowY:"auto"},children:C.map((t,a)=>e.jsx(V,{log:t,idx:a+1+(l-1)*j},a))}),e.jsx("div",{className:"my-3 d-flex justify-content-center",children:e.jsxs(m,{children:[e.jsx(m.Prev,{disabled:l===1,onClick:()=>o(t=>Math.max(1,t-1)),children:"Previous"}),Array.from({length:p},(t,a)=>a+1).map(t=>e.jsx(m.Item,{active:t===l,onClick:()=>o(t),children:t},t)),e.jsx(m.Next,{disabled:l===p,onClick:()=>o(t=>Math.min(p,t+1)),children:"Next"})]})})]})}export{D as default};
