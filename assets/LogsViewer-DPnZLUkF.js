const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/json-crypto-BuGX2dKY.js","assets/react-BRAeUO4q.js"])))=>i.map(i=>d[i]);
import{u as Z,_ as J}from"./index-BrNPJ5UB.js";import{j as e,c as G,I as R,d as Y,A as B,P as k,T as M}from"./bootstrap-V_VO7reD.js";import{r as o,u as Q}from"./react-router-CixZ3G_y.js";import{H as X,F as ee}from"./Header-DC1XGWnb.js";import"./react-BRAeUO4q.js";function U(r){return r.replace(/([A-Za-zÀ-ÖØ-öø-ÿ]+(?:['’][A-Za-zÀ-ÖØ-öø-ÿ]+)?)/g,i=>/^[A-ZÀ-ÖØ-Þ]+$/.test(i)?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():i.charAt(0).toUpperCase()+i.slice(1))}const se="_paginationScroll_dl4jo_1",ae="_logTimestamp_dl4jo_18",te="_sectionTitle_dl4jo_22",re="_accordionHeader_dl4jo_27",ne="_container_dl4jo_64",le="_accordionItem_dl4jo_85",ie="_accordionBody_dl4jo_92",de="_table_dl4jo_96",ce="_textSuccess_dl4jo_101",oe="_textInvalid_dl4jo_105",he="_textError_dl4jo_109",me="_collapseAllBtn_dl4jo_125",m={paginationScroll:se,logTimestamp:ae,sectionTitle:te,accordionHeader:re,container:ne,accordionItem:le,accordionBody:ie,table:de,textSuccess:ce,textInvalid:oe,textError:he,collapseAllBtn:me};function xe({log:r,idx:i}){var w,y,p,C,d,j,c,f,A,g,N,L,b,I,_,T,E,F;typeof r.message=="string"&&r.message.toLowerCase().includes("success");let u="";return((w=r.data)==null?void 0:w.status)==="invalid"?u=m.textInvalid:((y=r.data)==null?void 0:y.status)==="success"?u=m.textSuccess:u=m.textError,e.jsxs(B.Item,{eventKey:String(i),className:m.accordionItem,children:[e.jsx(B.Header,{className:m.accordionHeader,children:e.jsxs("span",{className:"d-block w-100",children:[e.jsx("span",{className:"fw-bold ".concat(u),children:((p=r.data)==null?void 0:p.nik)||""})," - ",U(((C=r.data)==null?void 0:C.nama)||"")]})}),e.jsxs(B.Body,{className:m.accordionBody,children:[e.jsxs("div",{className:"".concat(m.logTimestamp," mb-2"),children:["Timestamp: ",r.timestamp||""]}),e.jsx("div",{className:"".concat(m.logMessage," mb-2 ").concat(u),children:r.message||((d=r.data)==null?void 0:d.message)||""}),e.jsx("span",{className:m.sectionTitle,children:"Basic Data"}),e.jsx(M,{bordered:!0,striped:!0,className:"mb-3 ".concat(m.table),children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Tanggal"}),e.jsx("td",{children:((j=r.data)==null?void 0:j.tanggal)||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Nama"}),e.jsx("td",{children:U(((c=r.data)==null?void 0:c.nama)||"")})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Tgl Lahir"}),e.jsx("td",{children:((f=r.data)==null?void 0:f.tgl_lahir)||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Alamat"}),e.jsx("td",{children:((A=r.data)==null?void 0:A.alamat)||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"BB"}),e.jsx("td",{children:((g=r.data)==null?void 0:g.bb)||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"TB"}),e.jsx("td",{children:((N=r.data)==null?void 0:N.tb)||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Petugas"}),e.jsx("td",{children:((L=r.data)==null?void 0:L.petugas)||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Status"}),e.jsx("td",{children:((b=r.data)==null?void 0:b.status)||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Gender"}),e.jsx("td",{children:((I=r.data)==null?void 0:I.gender)||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Age"}),e.jsx("td",{children:((_=r.data)==null?void 0:_.age)||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Pekerjaan"}),e.jsx("td",{children:((T=r.data)==null?void 0:T.pekerjaan)||""})]})]})}),((E=r.data)==null?void 0:E.parsed_nik)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"section-title",children:"Parsed NIK"}),e.jsx(M,{bordered:!0,hover:!0,className:"mb-3 parsed-nik-table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Status"}),e.jsx("td",{children:r.data.parsed_nik.status||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Message"}),e.jsx("td",{children:r.data.parsed_nik.message||""})]}),r.data.parsed_nik.data&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"NIK"}),e.jsx("td",{children:r.data.parsed_nik.data.nik||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Kelamin"}),e.jsx("td",{children:r.data.parsed_nik.data.kelamin||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Lahir"}),e.jsx("td",{children:r.data.parsed_nik.data.lahir||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Provinsi"}),e.jsx("td",{children:r.data.parsed_nik.data.provinsi||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Kota/Kab"}),e.jsx("td",{children:r.data.parsed_nik.data.kotakab||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Kecamatan"}),e.jsx("td",{children:r.data.parsed_nik.data.namaKec||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Uniqcode"}),e.jsx("td",{children:r.data.parsed_nik.data.uniqcode||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Original Lahir"}),e.jsx("td",{children:r.data.parsed_nik.data.originalLahir||""})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Kelurahan"}),e.jsx("td",{children:Array.isArray(r.data.parsed_nik.data.kelurahan)?e.jsx("ul",{className:"list-group list-group-flush",children:r.data.parsed_nik.data.kelurahan.map((x,S)=>x&&typeof x=="object"&&x.name?e.jsxs("li",{className:"list-group-item",children:[x.name," ",e.jsxs("span",{className:"text-muted",children:["(ID: ",x.id,", District: ",x.district_id,")"]})]},S):null)}):""})]})]})]})})]}),((F=r.data)==null?void 0:F.formValues)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"section-title",children:"Form Values"}),e.jsxs(M,{bordered:!0,size:"sm",className:"mb-3",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Label"}),e.jsx("th",{children:"Value"})]})}),e.jsx("tbody",{children:r.data.formValues.map((x,S)=>e.jsxs("tr",{children:[e.jsx("td",{children:x.label||""}),e.jsx("td",{children:x.value||"<empty>"})]},S))})]})]})]})]})}function be({pageTitle:r="Log Viewer"}){const[i,u]=o.useState([]),[w,y]=o.useState(!0),[p,C]=o.useState(""),[d,j]=o.useState({status:"",gender:"",provinsi:"",kotakab:"",kecamatan:""}),[c,f]=o.useState(1),[A,g]=o.useState([]),[N,L]=o.useState(!1),b=20,I=Q(),{theme:_}=Z();o.useEffect(()=>{let s=!0;return y(!0),J(async()=>{const{decryptJson:t}=await import("./json-crypto-BuGX2dKY.js");return{decryptJson:t}},__vite__mapDeps([0,1])).then(({decryptJson:t})=>{fetch("/browser-automation/assets/data/logs.json").then(a=>a.text()).then(a=>{let l=[];const n="json$ecret";try{l=t(a,n)}catch(h){console.error("Failed to decrypt logs:",h),l=[]}s&&u(l)}).catch(()=>{s&&u([])}).finally(()=>{s&&y(!1)})}),()=>{s=!1}},[]);const T=o.useMemo(()=>i.filter(s=>s.data&&s.data.status==="success").length,[i]),E=o.useMemo(()=>i.filter(s=>s.data&&s.data.status!=="success").length,[i]),F=o.useMemo(()=>{const s=new Set;return i.forEach(t=>{var l,n,h;const a=(h=(n=(l=t.data)==null?void 0:l.parsed_nik)==null?void 0:n.data)==null?void 0:h.provinsi;a&&s.add(a)}),Array.from(s).sort()},[i]),x=o.useMemo(()=>{const s=new Set;return i.forEach(t=>{var l,n,h;const a=(h=(n=(l=t.data)==null?void 0:l.parsed_nik)==null?void 0:n.data)==null?void 0:h.kotakab;a&&s.add(a)}),Array.from(s).sort()},[i]),S=o.useMemo(()=>{const s=new Set;return i.forEach(t=>{var l,n,h;const a=(h=(n=(l=t.data)==null?void 0:l.parsed_nik)==null?void 0:n.data)==null?void 0:h.namaKec;a&&s.add(a)}),Array.from(s).sort()},[i]),P=o.useMemo(()=>{let s=i;if(p.trim()){const t=p.trim().toLowerCase();s=s.filter(a=>{var n,h,$,H,O,V,W,z,D;return[(n=a.data)==null?void 0:n.nik,(h=a.data)==null?void 0:h.nama,a.message,($=a.data)==null?void 0:$.tanggal,(H=a.data)==null?void 0:H.alamat,(O=a.data)==null?void 0:O.petugas,(V=a.data)==null?void 0:V.status,(W=a.data)==null?void 0:W.gender,(z=a.data)==null?void 0:z.age,(D=a.data)==null?void 0:D.pekerjaan].some(q=>typeof q=="string"&&q.toLowerCase().includes(t))})}return d.status&&(s=s.filter(t=>{var a;return((a=t.data)==null?void 0:a.status)===d.status})),d.gender&&(s=s.filter(t=>{var a;return((a=t.data)==null?void 0:a.gender)===d.gender})),d.provinsi&&(s=s.filter(t=>{var a,l,n;return((n=(l=(a=t.data)==null?void 0:a.parsed_nik)==null?void 0:l.data)==null?void 0:n.provinsi)===d.provinsi})),d.kotakab&&(s=s.filter(t=>{var a,l,n;return((n=(l=(a=t.data)==null?void 0:a.parsed_nik)==null?void 0:l.data)==null?void 0:n.kotakab)===d.kotakab})),d.kecamatan&&(s=s.filter(t=>{var a,l,n;return((n=(l=(a=t.data)==null?void 0:a.parsed_nik)==null?void 0:l.data)==null?void 0:n.namaKec)===d.kecamatan})),s},[i,p,d]),v=Math.ceil(P.length/b),K=P.slice((c-1)*b,c*b);return o.useEffect(()=>{console.log("filteredLogs.length:",P.length,"totalPages:",v,"currentPage:",c,"paginatedLogs.length:",K.length),c>1&&K.length===0&&f(1)},[P.length,v,c,K.length]),o.useEffect(()=>{f(1),g([])},[p,d]),o.useEffect(()=>{g([])},[c]),w?e.jsx("div",{className:"text-center my-5",children:"Loading logs..."}):e.jsxs(e.Fragment,{children:[e.jsx(X,{}),e.jsx("div",{className:"m-0 m-md-5",children:e.jsxs("div",{id:"logs-viewer",className:"container mx-auto py-4 bg-body-tertiary ".concat(m.container),"data-bs-theme":_,children:[e.jsxs("button",{type:"button",className:"btn btn-outline-secondary mb-3",onClick:()=>I("/"),children:[e.jsx("i",{className:"fa fa-arrow-left me-2"})," Back"]}),e.jsx("h1",{className:"my-4 text-body",children:r}),e.jsxs("div",{className:"mb-4 d-flex flex-wrap justify-content-center gap-2",children:[e.jsxs(G,{bg:"success",className:"px-3 py-1 fw-normal text-center",style:{fontSize:"0.95em",minWidth:120},children:["Success: ",T]}),e.jsxs(G,{bg:"danger",className:"px-3 py-1 fw-normal text-center",style:{fontSize:"0.95em",minWidth:120},children:["Not Success: ",E]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm ".concat(_==="dark"?"btn-outline-light":"btn-outline-dark"," mb-2"),style:{width:"100%"},"aria-expanded":N,onClick:()=>L(s=>!s),children:[e.jsx("i",{className:"fa ".concat(N?"fa-chevron-up":"fa-chevron-down")})," Filter Options"]}),N&&e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-12 col-sm-6",children:e.jsxs("div",{className:"d-grid",style:{gridTemplateColumns:"110px 1fr",alignItems:"center"},children:[e.jsx("label",{className:"form-label mb-0 text-end pe-2",htmlFor:"filter-status",style:{whiteSpace:"nowrap"},children:"Status:"}),e.jsxs("select",{id:"filter-status",className:"form-select form-select-sm",value:d.status,onChange:s=>j(t=>({...t,status:s.target.value})),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"invalid",children:"Invalid"}),e.jsx("option",{value:"error",children:"Error"})]})]})}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsxs("div",{className:"d-grid",style:{gridTemplateColumns:"110px 1fr",alignItems:"center"},children:[e.jsx("label",{className:"form-label mb-0 text-end pe-2",htmlFor:"filter-gender",style:{whiteSpace:"nowrap"},children:"Gender:"}),e.jsxs("select",{id:"filter-gender",className:"form-select form-select-sm",value:d.gender,onChange:s=>j(t=>({...t,gender:s.target.value})),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"L",children:"L"}),e.jsx("option",{value:"P",children:"P"})]})]})}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsxs("div",{className:"d-grid",style:{gridTemplateColumns:"110px 1fr",alignItems:"center"},children:[e.jsx("label",{className:"form-label mb-0 text-end pe-2",htmlFor:"filter-provinsi",style:{whiteSpace:"nowrap"},children:"Provinsi:"}),e.jsxs("select",{id:"filter-provinsi",className:"form-select form-select-sm",value:d.provinsi,onChange:s=>j(t=>({...t,provinsi:s.target.value})),children:[e.jsx("option",{value:"",children:"All"}),F.map((s,t)=>e.jsx("option",{value:s,children:s},t))]})]})}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsxs("div",{className:"d-grid",style:{gridTemplateColumns:"110px 1fr",alignItems:"center"},children:[e.jsx("label",{className:"form-label mb-0 text-end pe-2",htmlFor:"filter-kotakab",style:{whiteSpace:"nowrap"},children:"Kota/Kab:"}),e.jsxs("select",{id:"filter-kotakab",className:"form-select form-select-sm",value:d.kotakab,onChange:s=>j(t=>({...t,kotakab:s.target.value})),children:[e.jsx("option",{value:"",children:"All"}),x.map((s,t)=>e.jsx("option",{value:s,children:s},t))]})]})}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsxs("div",{className:"d-grid",style:{gridTemplateColumns:"110px 1fr",alignItems:"center"},children:[e.jsx("label",{className:"form-label mb-0 text-end pe-2",htmlFor:"filter-kecamatan",style:{whiteSpace:"nowrap"},children:"Kecamatan:"}),e.jsxs("select",{id:"filter-kecamatan",className:"form-select form-select-sm",value:d.kecamatan,onChange:s=>j(t=>({...t,kecamatan:s.target.value})),children:[e.jsx("option",{value:"",children:"All"}),S.map((s,t)=>e.jsx("option",{value:s,children:s},t))]})]})}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary w-100",title:"Clear Filters",onClick:()=>j({status:"",gender:"",provinsi:"",kotakab:"",kecamatan:""}),children:[e.jsx("i",{className:"fa fa-times"})," Clear Filters"]})})]})]}),e.jsxs(R,{className:"mb-3",id:"log-search-group",children:[e.jsx(R.Text,{children:e.jsx("i",{className:"fa-solid fa-magnifying-glass"})}),e.jsx(Y,{type:"text",placeholder:"Search logs...",autoComplete:"off",value:p,onChange:s=>C(s.target.value)}),e.jsxs("button",{type:"button",className:m.collapseAllBtn+" ms-2",title:"Collapse All",onClick:()=>g([]),children:[e.jsx("i",{className:"fa-solid fa-compress"})," ",e.jsx("span",{className:"sr-only",children:"Collapse All"})]})]}),e.jsx(B,{style:{maxHeight:"70vh",overflowY:"auto"},activeKey:A,onSelect:s=>{s&&g(t=>{const a=String(s);let l=Array.isArray(t)?t:[];return l.includes(a)?l.filter(n=>n!==a):[...l,a]})},children:K.map((s,t)=>e.jsx(xe,{log:s,idx:String(t+1+(c-1)*b)},t))}),e.jsx("div",{className:"my-3 d-flex justify-content-center ".concat(m.paginationScroll),children:e.jsxs(k,{size:"sm",children:[e.jsxs(k.Prev,{disabled:c===1,onClick:()=>f(s=>Math.max(1,s-1)),children:[e.jsx("i",{className:"fa fa-angle-left","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Previous"})]}),(()=>{const s=[];let a=!1,l=!1;for(let n=1;n<=v;n++)n===1||n===v||n>=c-2&&n<=c+2?s.push(e.jsx(k.Item,{active:n===c,onClick:()=>f(n),children:n},n)):n<c-2&&!a&&n!==1?(s.push(e.jsx(k.Ellipsis,{disabled:!0},"left-ellipsis")),a=!0):n>c+2&&!l&&n!==v&&(s.push(e.jsx(k.Ellipsis,{disabled:!0},"right-ellipsis")),l=!0);return s})(),e.jsxs(k.Next,{disabled:c===v,onClick:()=>f(s=>Math.min(v,s+1)),children:[e.jsx("i",{className:"fa fa-angle-right","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Next"})]})]})})]})}),e.jsx(ee,{})]})}export{be as default};
